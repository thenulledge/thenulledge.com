---js
{
  pagination: {
    data: "events2025Array",
    size: 1,
    alias: "eventData",
    resolve: "values",
    before: function(paginationData) {
      // Get the nullEDGE event and flatten its sessions
      const nullEDGE = paginationData.find(event => event.id === "2025-nulledge");
      if (!nullEDGE || !nullEDGE.sessions) return [];
      return nullEDGE.sessions.filter(session => session.id !== null);
    }
  },
  layout: "base",
  schema: "VideoObject",
  eleventyComputed: {
    title: (data) => `${data.eventData.title} - nullEDGE 2025`,
    description: (data) => `Watch ${data.eventData.title} from nullEDGE 2025 featuring ${data.eventData.speakers.join(', ')}`,
    permalink: (data) => {
      const slug = data.slugifyTitle(data.eventData.title);
      return `/2025/conference/${slug}/`;
    },
    session: (data) => data.eventData,
    event: (data) => {
      // Find the nullEDGE event from events2025Array
      return data.events2025Array.find(e => e.id === "2025-nulledge");
    },
    breadcrumb: (data) => ({
      parent: "nullEDGE 2025",
      parentUrl: "/2025/conference",
      current: data.eventData.title
    })
  }
}
---

{# Import partials #}
{% from "partials/chat.njk" import chatDisplay %}

<div class="container wrapper flow">
  {# Session Header #}
  <header class="session-header flow">
    <nav class="breadcrumb">
      <a href="/">Home</a>
      <span>/</span>
      <a href="/2025/conference">nullEDGE 2025</a>
      <span>/</span>
      <span>{{ eventData.title }}</span>
    </nav>
    
    <h1>{{ eventData.title }}</h1>
    
     <div class="session-meta">
      <div class="meta-item">
        <i class="fa-solid fa-users"></i>
        <span>
          {%- for speakerName in eventData.speakers -%}
            {%- set personData = people[speakerName] -%}
            {%- set speakerLinkedin = personData.linkedin if personData and personData.linkedin else None -%}
            {%- set speakerWebsite = personData.website if personData and personData.website else None -%}
            {%- set speakerSearchUrl = "https://www.linkedin.com/search/results/all/?keywords=" + (speakerName | urlencode) -%}
            {%- set speakerProfileUrl = speakerLinkedin or speakerWebsite or speakerSearchUrl -%}
            <a href="{{ speakerProfileUrl }}" target="_blank" rel="noopener noreferrer">{{ speakerName }}</a>{% if not loop.last %}, {% endif %}
          {%- endfor -%}
        </span>
      </div>
      
      <div class="meta-item">
        <i class="fa-solid fa-clock"></i>
        <span>{{ eventData.duration }} minutes</span>
      </div>
      
      <div class="meta-item">
        <i class="fa-solid fa-calendar"></i>
        <span>{{ eventData.published | formatDate('MMMM D, YYYY') }}</span>
      </div>
    </div>
  </header>

  {# Video Player #}
  <section class="video-section">
    <div class="video-container">
      <iframe 
        src="https://www.youtube.com/embed/{{ eventData.id }}" 
        title="{{ eventData.title }}"
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
        allowfullscreen
        loading="lazy"
      ></iframe>
    </div>
    
    <div class="video-actions">
      <a href="https://www.youtube.com/watch?v={{ eventData.id }}" 
         target="_blank" 
         rel="noopener noreferrer" 
         class="button">
        <i class="fa-brands fa-youtube"></i>
        Watch on YouTube
      </a>
    </div>
  </section>

  {# Chat Transcript #}
  {{ chatDisplay(eventData.chatMessages) }}

  {# Back to Conference #}
  <section class="back-navigation">
    <a href="/2025/conference" class="button button-secondary">
      <i class="fa-solid fa-arrow-left"></i>
      Back to Conference Schedule
    </a>
  </section>
</div>

<style>
  /* Session-specific styles only */
  .session-header {
    text-align: center;
    padding: var(--space-l) 0;
  }

  .breadcrumb {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    font-size: var(--size-step--1);
    color: var(--color-text-muted);
    justify-content: center;
    margin-bottom: var(--space-m);
  }

  .breadcrumb a {
    color: var(--color-primary);
    text-decoration: none;
  }

  .breadcrumb a:hover {
    text-decoration: underline;
  }

  .breadcrumb span {
    color: var(--color-text-muted);
  }

  .session-header h1 {
    margin: 0 0 var(--space-m) 0;
    font-size: var(--size-step-3);
  }

  .session-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-m);
    justify-content: center;
    align-items: center;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    font-size: var(--size-step-0);
    color: var(--color-text);
  }

  .meta-item a {
    color: var(--color-primary);
    text-decoration: none;
  }

  .meta-item a:hover {
    text-decoration: underline;
  }

  .meta-item svg, .meta-item i {
    color: var(--color-primary);
    flex-shrink: 0;
    font-size: 20px;
  }

  .video-section {
    margin: var(--space-xl) 0;
  }

  .video-container {
    aspect-ratio: 16 / 9;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    background: #000;
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  }

  .video-container iframe {
    width: 100%;
    height: 100%;
    display: block;
  }

  .video-actions {
    display: flex;
    justify-content: center;
    margin-top: var(--space-m);
  }

  .video-actions .button {
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
  }

  .back-navigation {
    margin: var(--space-xl) 0;
    text-align: center;
  }

  .back-navigation .button {
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
  }

  @media (max-width: 768px) {
    .session-header h1 {
      font-size: var(--size-step-2);
    }

    .session-meta {
      flex-direction: column;
      gap: var(--space-s);
    }
  }
</style>
