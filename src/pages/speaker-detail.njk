---js
{
  pagination: {
    data: "collections.speakers",
    size: 1,
    alias: "speakerEntry"
  },
  layout: "base",
  schema: "Person",
  eleventyComputed: {
    speakerName: (data) => data.speakerEntry?.[0] || '',
    speakerData: (data) => data.speakerEntry?.[1] || {},
    title: (data) => {
      const name = data.speakerEntry?.[0];
      return name ? `${name} - Speaker Profile` : 'Speaker Profile';
    },
    description: (data) => {
      const name = data.speakerEntry?.[0];
      const value = data.speakerEntry?.[1];
      if (!value) return 'Speaker profile at nullEDGE conferences.';
      const bio = value.bio || `${name} is a speaker at nullEDGE conferences.`;
      return bio.substring(0, 160);
    },
    permalink: (data) => {
      const name = data.speakerEntry?.[0];
      if (!name) return false;
      const slug = name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/-+/g, '-').trim();
      return `/speakers/${slug}/`;
    },
    person: (data) => {
      const name = data.speakerEntry?.[0];
      const value = data.speakerEntry?.[1];
      if (!name || !value) return {};
      const slug = name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/-+/g, '-').trim();
      return {
        name: name,
        jobTitle: value.title,
        company: value.company,
        image: value.image,
        bio: value.bio,
        url: slug ? `/speakers/${slug}/` : undefined
      };
    },
    speakerSessions: (data) => {
      const sessions = [];
      const speakerName = data.speakerEntry?.[0];
      if (!speakerName || !data.schedules) return sessions;
      
      Object.entries(data.schedules).forEach(([eventId, info]) => {
        const evSessions = info.sessions || [];
        evSessions.forEach(session => {
          if (session.speakers && session.speakers.find(s => s.name === speakerName)) {
            sessions.push({
              ...session,
              eventName: eventId,
              year: eventId.split('-')[0]
            });
          }
        });
      });
      return sessions;
    }
  }
}
---

<div class="container wrapper flow">
  <nav class="breadcrumb">
    <a href="/">Home</a> / <a href="/speakers">Speakers</a> / {{ speakerName }}
  </nav>

  <header class="speaker-header">
    <img src="{{ speakerData.image }}" alt="{{ speakerName }}" class="speaker-photo" eleventy:ignore>
    <div class="speaker-info flow">
      <h1>{{ speakerName }}</h1>
      {% if speakerData.title %}<p class="speaker-title">{{ speakerData.title }}</p>{% endif %}
      {% if speakerData.company %}<p class="speaker-company">{{ speakerData.company }}</p>{% endif %}
      {% if speakerData.linkedin %}
        <a href="{{ speakerData.linkedin }}" target="_blank" rel="noopener noreferrer" class="linkedin-link">
          Connect on LinkedIn →
        </a>
      {% endif %}
      {% if speakerData.bio %}<p class="speaker-bio">{{ speakerData.bio }}</p>{% endif %}
    </div>
  </header>

  {% if speakerSessions.length > 0 %}
  <section class="region flow">
    <h2>Sessions</h2>
    <ul class="sessions-list">
      {% for session in speakerSessions %}
      <li>
        <a href="/{{ session.year }}/conference/{{ session.name | slugify }}/">{{ session.name }}</a>
        <span class="session-meta">{{ session.eventName }}{% if session.id %} · <a href="https://www.youtube.com/watch?v={{ session.id }}" target="_blank" rel="noopener">Watch</a>{% endif %}</span>
      </li>
      {% endfor %}
    </ul>
  </section>
  {% else %}
  <section class="region">
    <p>{{ speakerName }} hasn't presented at a nullEDGE conference yet.</p>
  </section>
  {% endif %}

  <a href="/speakers" class="back-link">← Back to Speakers</a>
</div>

<style>
  .breadcrumb {
    font-size: var(--size-step--1);
    color: hsl(var(--muted-foreground));
    margin-bottom: var(--space-l);
  }
  .breadcrumb a { color: hsl(var(--primary)); text-decoration: none; }
  .breadcrumb a:hover { text-decoration: underline; }

  .speaker-header {
    display: grid;
    grid-template-columns: 150px 1fr;
    gap: var(--space-l);
    align-items: start;
  }
  @media (max-width: 600px) {
    .speaker-header { grid-template-columns: 1fr; text-align: center; }
    .speaker-photo { margin: 0 auto; }
  }

  .speaker-photo {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
  }

  .speaker-title {
    font-size: var(--size-step-1);
    color: hsl(var(--primary));
    font-weight: 600;
    margin: 0;
  }

  .speaker-company {
    color: hsl(var(--muted-foreground));
    margin: 0;
  }

  .linkedin-link {
    color: #0077b5;
    text-decoration: none;
    font-weight: 500;
  }
  .linkedin-link:hover { text-decoration: underline; }

  .speaker-bio {
    margin-top: var(--space-m);
    padding-top: var(--space-m);
    border-top: 1px solid hsl(var(--border));
  }

  .sessions-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .sessions-list li {
    padding: var(--space-s) 0;
    border-bottom: 1px solid hsl(var(--border));
  }
  .sessions-list a { color: hsl(var(--foreground)); font-weight: 500; }
  .sessions-list a:hover { color: hsl(var(--primary)); }
  .session-meta {
    display: block;
    font-size: var(--size-step--1);
    color: hsl(var(--muted-foreground));
    margin-top: 0.25rem;
  }
  .session-meta a { color: hsl(var(--primary)); }

  .back-link {
    display: inline-block;
    margin-top: var(--space-xl);
    color: hsl(var(--primary));
    text-decoration: none;
  }
  .back-link:hover { text-decoration: underline; }
</style>
