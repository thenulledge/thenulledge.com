{# Testimonials Section - Use with {% include %} 
Set these variables before including:
- testimonialsTitle
- testimonialsSubtitle
#}
<section class="testimonials-section">
  <div class="container">
    <h2 class="section-title">{{ testimonialsTitle }}</h2>
    {% if testimonialsSubtitle %}
    <p class="section-subtitle">{{ testimonialsSubtitle }}</p>
    {% endif %}
    
    <div class="testimonials-masonry">
      {% for testimonial in testimonials %}
      <a href="{{ testimonial.sessionLink }}:~:text={{testimonial.quote | urlEncode}}" class="testimonial-card">
        <div class="testimonial-header">
          <div class="testimonial-photo">
            {% if testimonial.photo %}
            <img 
              src="{{ testimonial.photo }}" 
              alt="{{ testimonial.name }}"
              loading="lazy"
            />
            {% else %}
            <div class="testimonial-placeholder">
              {% set nameParts = testimonial.name.split(' ') %}
              <span class="testimonial-initials">
                {{ nameParts[0][0] }}{{ nameParts[nameParts.length - 1][0] }}
              </span>
            </div>
            {% endif %}
          </div>
          
          <div class="testimonial-meta">
            <div class="testimonial-name">{{ testimonial.name }}</div>
            {% if testimonial.role %}
            <div class="testimonial-role">{{ testimonial.role }}</div>
            {% endif %}
          </div>
        </div>
        
        <blockquote class="testimonial-quote">
          "{{ testimonial.quote }}"
        </blockquote>
        
        <div class="testimonial-session">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"/>
          </svg>
          <span>{{ testimonial.sessionTitle }}</span>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .testimonials-section {
    padding: 5rem 1rem;
    background: hsl(var(--background));
  }

  .section-title {
    text-align: center;
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    margin-bottom: 1rem;
  }

  .section-subtitle {
    text-align: center;
    font-size: clamp(1rem, 2vw, 1.25rem);
    color: hsl(var(--muted-foreground));
    max-width: 800px;
    margin: 0 auto 3rem;
  }

  /* Masonry layout using CSS columns */
  .testimonials-masonry {
    column-count: 1;
    column-gap: 1.5rem;
    margin-top: 3rem;
  }

  .testimonial-card {
    display: block;
    break-inside: avoid;
    margin-bottom: 1.5rem;
    padding: 1.5rem;
    background: hsl(var(--card));
    border: 3px solid hsl(var(--border));
    border-radius: 8px;
    transition: all 0.3s ease;
    text-decoration: none;
    color: inherit;
  }

  .testimonial-card:hover {
    border-color: hsl(var(--primary));
    box-shadow: 0 8px 24px hsl(var(--primary) / 0.15);
    transform: translateY(-2px);
  }

  .testimonial-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .testimonial-photo {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
    border: 2px solid hsl(var(--primary) / 0.3);
  }

  .testimonial-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .testimonial-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, hsl(var(--primary) / 0.3), hsl(var(--primary) / 0.5));
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .testimonial-initials {
    font-size: 1.5rem;
    font-weight: 700;
    color: hsl(var(--primary));
  }

  .testimonial-meta {
    flex: 1;
    min-width: 0;
  }

  .testimonial-name {
    font-size: var(--size-step-0);
    font-weight: 700;
    color: hsl(var(--foreground));
    margin-bottom: 0.25rem;
    line-height: 1.3;
  }

  .testimonial-role {
    font-size: var(--size-step--1);
    color: hsl(var(--muted-foreground));
    line-height: 1.3;
  }

  .testimonial-quote {
    font-size: var(--size-step-0);
    color: hsl(var(--foreground));
    line-height: 1.6;
    margin: 0 0 1rem 0;
    font-style: italic;
  }

  .testimonial-session {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: var(--size-step--1);
    color: hsl(var(--primary));
    font-weight: 500;
    padding-top: 1rem;
    border-top: 1px solid hsl(var(--border));
  }

  .testimonial-session svg {
    flex-shrink: 0;
  }

  /* Responsive column counts */
  @media (min-width: 640px) {
    .testimonials-masonry {
      column-count: 2;
      column-gap: 2rem;
    }
  }

  @media (min-width: 1024px) {
    .testimonials-masonry {
      column-count: 3;
      column-gap: 2rem;
    }

    .testimonial-card {
      padding: 2rem;
    }
  }

  @media (max-width: 639px) {
    .testimonials-section {
      padding: 3rem 1rem;
    }
  }
</style>
