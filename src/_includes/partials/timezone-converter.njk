{# 
  Timezone Converter Component
  
  Usage:
  {% from "partials/timezone-converter.njk" import timezoneConverter %}
  {{ timezoneConverter(
    baseTime="7:00 PM",
    baseTimezone="SGT",
    baseCity="Singapore",
    date="January 22, 2026",
    atlantaTime="6:00 AM",
    londonTime="11:00 AM",
    indiaTime="4:30 PM",
    sydneyTime="10:00 PM",
    primaryRegion="sydney"
  ) }}
  
  Parameters:
  - baseTime: The reference time (e.g., "7:00 PM")
  - baseTimezone: The timezone abbreviation (e.g., "SGT")
  - baseCity: The city name for the base timezone (e.g., "Singapore")
  - date: The date string (e.g., "January 22, 2026")
  - atlantaTime: Time in Atlanta (EST)
  - londonTime: Time in London (GMT)
  - indiaTime: Time in India (IST)
  - sydneyTime: Time in Sydney (AEDT)
  - primaryRegion: Which region to highlight first (optional: "atlanta", "london", "india", "sydney")
#}

{# 
  Timezone Converter Component - Dynamic Version
  
  Usage with event object:
  {% from "partials/timezone-converter.njk" import timezoneConverterDynamic %}
  {{ timezoneConverterDynamic(event, primaryRegion="sydney") }}
  
  Or legacy usage with hardcoded times:
  {% from "partials/timezone-converter.njk" import timezoneConverter %}
  {{ timezoneConverter(
    baseTime="7:00 PM",
    baseTimezone="SGT",
    baseCity="Singapore",
    date="January 22, 2026",
    atlantaTime="6:00 AM",
    londonTime="11:00 AM",
    indiaTime="4:30 PM",
    sydneyTime="10:00 PM",
    primaryRegion="sydney"
  ) }}
#}

{% macro timezoneConverterDynamic(event) %}
  {% set primaryRegion = event.primaryRegion or "atlanta" %}
  {% set tz = event.niceDatesTimes %}
  
  <section class="region flow">
    <h2 class="text-center">Convenient Timezone</h2>
    <div class="card flow">
      <p class="text-center text-muted">
        {{ event.when.start | formatDateWithTimezone(event.timezone) }}
      </p>
      <div class="timezone-grid">
        {% if primaryRegion == "atlanta" %}
          <div class="timezone-item timezone-primary">
            <div class="timezone-time">{{ tz.atlanta.time }}</div>
            <div class="timezone-city">{{ tz.atlanta.city }} ({{ tz.atlanta.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.london.time }}</div>
            <div class="timezone-city">{{ tz.london.city }} ({{ tz.london.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.india.time }}{% if tz.india.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.india.city }} ({{ tz.india.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.singapore.time }}{% if tz.singapore.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.singapore.city }} ({{ tz.singapore.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.sydney.time }}{% if tz.sydney.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.sydney.city }} ({{ tz.sydney.timezone }})</div>
          </div>
        {% elif primaryRegion == "london" %}
          <div class="timezone-item timezone-primary">
            <div class="timezone-time">{{ tz.london.time }}</div>
            <div class="timezone-city">{{ tz.london.city }} ({{ tz.london.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.atlanta.time }}</div>
            <div class="timezone-city">{{ tz.atlanta.city }} ({{ tz.atlanta.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.india.time }}{% if tz.india.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.india.city }} ({{ tz.india.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.singapore.time }}{% if tz.singapore.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.singapore.city }} ({{ tz.singapore.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.sydney.time }}{% if tz.sydney.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.sydney.city }} ({{ tz.sydney.timezone }})</div>
          </div>
        {% elif primaryRegion == "india" %}
          <div class="timezone-item timezone-primary">
            <div class="timezone-time">{{ tz.india.time }}</div>
            <div class="timezone-city">{{ tz.india.city }} ({{ tz.india.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.atlanta.time }}</div>
            <div class="timezone-city">{{ tz.atlanta.city }} ({{ tz.atlanta.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.london.time }}</div>
            <div class="timezone-city">{{ tz.london.city }} ({{ tz.london.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.singapore.time }}{% if tz.singapore.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.singapore.city }} ({{ tz.singapore.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.sydney.time }}{% if tz.sydney.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.sydney.city }} ({{ tz.sydney.timezone }})</div>
          </div>
        {% elif primaryRegion == "sydney" %}
          <div class="timezone-item timezone-primary">
            <div class="timezone-time">{{ tz.sydney.time }}</div>
            <div class="timezone-city">{{ tz.sydney.city }} ({{ tz.sydney.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.atlanta.time }}</div>
            <div class="timezone-city">{{ tz.atlanta.city }} ({{ tz.atlanta.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.london.time }}</div>
            <div class="timezone-city">{{ tz.london.city }} ({{ tz.london.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.india.time }}{% if tz.india.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.india.city }} ({{ tz.india.timezone }})</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ tz.singapore.time }}{% if tz.singapore.nextDay %} <span class="text-muted">+1</span>{% endif %}</div>
            <div class="timezone-city">{{ tz.singapore.city }} ({{ tz.singapore.timezone }})</div>
          </div>
        {% endif %}
      </div>
    </div>
  </section>
{% endmacro %}

{% macro timezoneConverter(baseTime, baseTimezone, baseCity, date, atlantaTime, londonTime, indiaTime, sydneyTime, primaryRegion="atlanta") %}
  <section class="region flow">
    <h2 class="text-center">Convenient Timezone</h2>
    <div class="card flow">
      <p class="text-center text-muted">
        {{ baseTime }} {{ baseTimezone }} ({{ baseCity }}) on {{ date }} is:
      </p>
      <div class="timezone-grid">
        {% if primaryRegion == "atlanta" %}
          <div class="timezone-item timezone-primary">
            <div class="timezone-time">{{ atlantaTime }}</div>
            <div class="timezone-city">Atlanta (EST)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ londonTime }}</div>
            <div class="timezone-city">London (GMT)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ indiaTime }}</div>
            <div class="timezone-city">Mumbai/Bangalore (IST)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ sydneyTime }}</div>
            <div class="timezone-city">Sydney (AEDT)</div>
          </div>
        {% elif primaryRegion == "london" %}
          <div class="timezone-item timezone-primary">
            <div class="timezone-time">{{ londonTime }}</div>
            <div class="timezone-city">London (GMT)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ atlantaTime }}</div>
            <div class="timezone-city">Atlanta (EST)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ indiaTime }}</div>
            <div class="timezone-city">Mumbai/Bangalore (IST)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ sydneyTime }}</div>
            <div class="timezone-city">Sydney (AEDT)</div>
          </div>
        {% elif primaryRegion == "india" %}
          <div class="timezone-item timezone-primary">
            <div class="timezone-time">{{ indiaTime }}</div>
            <div class="timezone-city">Mumbai/Bangalore (IST)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ atlantaTime }}</div>
            <div class="timezone-city">Atlanta (EST)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ londonTime }}</div>
            <div class="timezone-city">London (GMT)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ sydneyTime }}</div>
            <div class="timezone-city">Sydney (AEDT)</div>
          </div>
        {% elif primaryRegion == "sydney" %}
          <div class="timezone-item timezone-primary">
            <div class="timezone-time">{{ sydneyTime }}</div>
            <div class="timezone-city">Sydney (AEDT)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ atlantaTime }}</div>
            <div class="timezone-city">Atlanta (EST)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ londonTime }}</div>
            <div class="timezone-city">London (GMT)</div>
          </div>
          <div class="timezone-item">
            <div class="timezone-time">{{ indiaTime }}</div>
            <div class="timezone-city">Mumbai/Bangalore (IST)</div>
          </div>
        {% endif %}
      </div>
    </div>
  </section>
{% endmacro %}
